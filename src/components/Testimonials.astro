---
import TestimonialCard from "@components/ui/TestimonialCard.astro";

const testimonialsData = [
  {
    authorName: "Lesly Abraham",
    authorImage:
      "https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 5,
    quote:
      "La Dra. Lucia y su equipo salvaron la vida de mi gatito Harry. Su experiencia es inigualable. No confiaría en nadie más.",
    petInfo: "Mascota: Harry (Gato Persa)",
  },
  {
    authorName: "Victor Perleche",
    authorImage:
      "https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 4,
    quote:
      "¡El servicio de peluquería es fantástico! Luna siempre vuelve a casa luciendo hermosa y oliendo genial. El personal es muy gentil y cuidadoso.",
    petInfo: "Mascota: Luna (Gato Persa)",
  },
  {
    authorName: "Isabel Quintero",
    authorImage:
      "https://images.pexels.com/photos/1181690/pexels-photo-1181690.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 5,
    quote:
      "Como dueña primeriza, estaba nerviosa por las vacunas. La Dra. Helen me explicó todo claramente y nos hizo sentir cómodos a mí y a Fracsito.",
    petInfo: "Mascota: Fracsito (Pitbull)",
  },
  {
    authorName: "Niomara Tremont",
    authorImage:
      "https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 5,
    quote:
      "El equipo de VetAriel es increíble. Siempre están dispuestos a responder mis preguntas y cuidar de mi gato Mollejuo como si fuera suyo.",
    petInfo: "Mascota: Mollejuo (Gato Siamés)",
  },
  {
    authorName: "Olga Bustinza",
    authorImage:
      "https://images.pexels.com/photos/1858175/pexels-photo-1858175.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 5,
    quote:
      "La atención de emergencia fue excepcional. Mi perro Miguelito tuvo una crisis y el equipo actuó rápido y con profesionalismo.",
    petInfo: "Mascota: Miguelito (Pastor Alemán)",
  },
  {
    authorName: "Luz Cerna",
    authorImage:
      "https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=200",
    rating: 5,
    quote:
      "La atención de emergencia fue excepcional. Mi perro Rocky tuvo una crisis y el equipo actuó rápido y con profesionalismo.",
    petInfo: "Mascota: Rocky (Bulldog Francés)",
  },
];

// Calcula el promedio de calificaciones y el total de reseñas
const totalReviews = testimonialsData.length;
const averageRating = (
  testimonialsData.reduce((sum, review) => sum + review.rating, 0) /
  totalReviews
).toFixed(1);
---

<section id="testimonials" class="py-16 bg-gray-50">
  <!--  SCRIPT DE SCHEMA AGGREGATE RATING (JSON-LD) -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "AggregateRating",
      itemReviewed: {
        "@type": "Organization",
        name: "VetAriel",
      },
      ratingValue: averageRating,
      reviewCount: totalReviews,
      bestRating: "5",
      worstRating: "1",
    })}
  />

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-teal-700 mb-4">
        Lo que Dicen Nuestros Clientes
      </h2>
      <p class="text-xl text-gray-600">
        Historias reales de nuestros clientes satisfechos y sus queridas
        mascotas.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        testimonialsData.map((testimonial) => (
          <TestimonialCard {...testimonial} />
        ))
      }
    </div>
  </div>
</section>
